"use strict";(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[5133],{99831:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,"/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n/*\n* Ensure proper alignment of the vue material icons\n*/\n.material-design-icon[data-v-551209a3] {\n  display: flex;\n  align-self: center;\n  justify-self: center;\n  align-items: center;\n  justify-content: center;\n}\n.loading-icon svg[data-v-551209a3] {\n  animation: rotate var(--animation-duration, 0.8s) linear infinite;\n}","",{version:3,sources:["webpack://./../nc-vue/dist/assets/NcLoadingIcon-BSONDy7x.css"],names:[],mappings:"AAAA;;;EAGE;AACF;;;EAGE;AACF;;CAEC;AACD;EACE,aAAa;EACb,kBAAkB;EAClB,oBAAoB;EACpB,mBAAmB;EACnB,uBAAuB;AACzB;AACA;EACE,iEAAiE;AACnE",sourcesContent:["/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n/**\n * SPDX-FileCopyrightText: 2021 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n/*\n* Ensure proper alignment of the vue material icons\n*/\n.material-design-icon[data-v-551209a3] {\n  display: flex;\n  align-self: center;\n  justify-self: center;\n  align-items: center;\n  justify-content: center;\n}\n.loading-icon svg[data-v-551209a3] {\n  animation: rotate var(--animation-duration, 0.8s) linear infinite;\n}"],sourceRoot:""}]);const l=i},29957:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,".clear-at-select[data-v-72be27d6]{display:flex;margin-bottom:10px;align-items:center}.clear-at-select__label[data-v-72be27d6]{margin-right:12px}.clear-at-select__select[data-v-72be27d6]{flex-grow:1;min-width:215px}","",{version:3,sources:["webpack://./apps/user_status/src/components/ClearAtSelect.vue"],names:[],mappings:"AACA,kCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CAEA,yCACC,iBAAA,CAGD,0CACC,WAAA,CACA,eAAA",sourcesContent:["\n.clear-at-select {\n\tdisplay: flex;\n\tmargin-bottom: 10px;\n\talign-items: center;\n\n\t&__label {\n\t\tmargin-right: 12px;\n\t}\n\n\t&__select {\n\t\tflex-grow: 1;\n\t\tmin-width: 215px;\n\t}\n}\n"],sourceRoot:""}]);const l=i},29478:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,".custom-input[data-v-3f943eb8]{display:flex;align-items:flex-end;gap:var(--default-grid-baseline);width:100%}.custom-input__container[data-v-3f943eb8]{width:100%}","",{version:3,sources:["webpack://./apps/user_status/src/components/CustomMessageInput.vue"],names:[],mappings:"AACA,+BACC,YAAA,CACA,oBAAA,CACA,gCAAA,CACA,UAAA,CAEA,0CACC,UAAA",sourcesContent:["\n.custom-input {\n\tdisplay: flex;\n\talign-items: flex-end;\n\tgap: var(--default-grid-baseline);\n\twidth: 100%;\n\n\t&__container {\n\t\twidth: 100%;\n\t}\n}\n"],sourceRoot:""}]);const l=i},74430:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,".user-status-online-select__label[data-v-a73330f8]{position:relative;display:block;margin:8px;padding:8px;padding-left:40px;border:2px solid var(--color-main-background);border-radius:var(--border-radius-large);background-color:var(--color-background-hover);background-position:8px center;background-size:24px}.user-status-online-select__label span[data-v-a73330f8],.user-status-online-select__label[data-v-a73330f8]{cursor:pointer}.user-status-online-select__label span[data-v-a73330f8]{position:absolute;top:calc(50% - 10px);left:10px;display:block;width:24px;height:24px}.user-status-online-select__input:checked+.user-status-online-select__label[data-v-a73330f8]{outline:2px solid var(--color-main-text);box-shadow:0 0 0 4px var(--color-main-background)}.user-status-online-select__input:focus-visible+.user-status-online-select__label[data-v-a73330f8]{outline:2px solid var(--color-primary-element) !important}.user-status-online-select__subline[data-v-a73330f8]{display:block;color:var(--color-text-lighter)}","",{version:3,sources:["webpack://./apps/user_status/src/components/OnlineStatusSelect.vue"],names:[],mappings:"AAMC,mDACC,iBAAA,CACA,aAAA,CACA,UANc,CAOd,WAPc,CAQd,iBAAA,CACA,6CAAA,CACA,wCAAA,CACA,8CAAA,CACA,8BAAA,CACA,oBAdU,CAgBV,2GAEC,cAAA,CAGD,wDACC,iBAAA,CACA,oBAAA,CACA,SAAA,CACA,aAAA,CACA,UA1BS,CA2BT,WA3BS,CA+BX,6FACC,wCAAA,CACA,iDAAA,CAGD,mGACC,yDAAA,CAGD,qDACC,aAAA,CACA,+BAAA",sourcesContent:["\n@use 'sass:math';\n$icon-size: 24px;\n$label-padding: 8px;\n\n.user-status-online-select {\n\t&__label {\n\t\tposition: relative;\n\t\tdisplay: block;\n\t\tmargin: $label-padding;\n\t\tpadding: $label-padding;\n\t\tpadding-left: $icon-size + $label-padding * 2;\n\t\tborder: 2px solid var(--color-main-background);\n\t\tborder-radius: var(--border-radius-large);\n\t\tbackground-color: var(--color-background-hover);\n\t\tbackground-position: $label-padding center;\n\t\tbackground-size: $icon-size;\n\n\t\tspan,\n\t\t& {\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\tspan {\n\t\t\tposition: absolute;\n\t\t\ttop: calc(50% - 10px);\n\t\t\tleft: 10px;\n\t\t\tdisplay: block;\n\t\t\twidth: $icon-size;\n\t\t\theight: $icon-size;\n\t\t}\n\t}\n\n\t&__input:checked + &__label {\n\t\toutline: 2px solid var(--color-main-text);\n\t\tbox-shadow: 0 0 0 4px var(--color-main-background);\n\t}\n\n\t&__input:focus-visible + &__label {\n\t\toutline: 2px solid var(--color-primary-element) !important;\n\t}\n\n\t&__subline {\n\t\tdisplay: block;\n\t\tcolor: var(--color-text-lighter);\n\t}\n}\n"],sourceRoot:""}]);const l=i},69236:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,'.predefined-status__label[data-v-0c9447c8]{display:flex;flex-wrap:nowrap;justify-content:flex-start;flex-basis:100%;border-radius:var(--border-radius);align-items:center;min-height:44px}.predefined-status__label--icon[data-v-0c9447c8]{flex-basis:40px;text-align:center}.predefined-status__label--message[data-v-0c9447c8]{font-weight:bold;padding:0 6px}.predefined-status__label--clear-at[data-v-0c9447c8]{color:var(--color-text-maxcontrast)}.predefined-status__label--clear-at[data-v-0c9447c8]::before{content:" â€“ "}.predefined-status__input:checked+.predefined-status__label[data-v-0c9447c8],.predefined-status__label[data-v-0c9447c8]:active{outline:2px solid var(--color-main-text);box-shadow:0 0 0 4px var(--color-main-background);border-radius:var(--border-radius-large)}.predefined-status__input:focus-visible+.predefined-status__label[data-v-0c9447c8]{outline:2px solid var(--color-primary-element) !important;border-radius:var(--border-radius-large)}',"",{version:3,sources:["webpack://./PredefinedStatus.vue","webpack://./apps/user_status/src/components/PredefinedStatus.vue"],names:[],mappings:"AAAA,2CCEC,YACC,CAAA,gBACA,CAAA,0BACA,CAAA,eACA,CAAA,kCACA,CAAA,kBACA,CAAA,eACA,CAAA,iDAEA,eACC,CAAA,iBACA,CAAA,oDAGD,gBACC,CAAA,aACA,CAAA,qDAGD,mCACC,CAAA,6DAEA,aACC,CAAA,+HAKH,wCAEC,CAAA,iDACA,CAAA,wCACA,CAAA,mFAGD,yDACC,CAAA,wCACA",sourcesContent:['.predefined-status__label{display:flex;flex-wrap:nowrap;justify-content:flex-start;flex-basis:100%;border-radius:var(--border-radius);align-items:center;min-height:44px}.predefined-status__label--icon{flex-basis:40px;text-align:center}.predefined-status__label--message{font-weight:bold;padding:0 6px}.predefined-status__label--clear-at{color:var(--color-text-maxcontrast)}.predefined-status__label--clear-at::before{content:" â€“ "}.predefined-status__input:checked+.predefined-status__label,.predefined-status__label:active{outline:2px solid var(--color-main-text);box-shadow:0 0 0 4px var(--color-main-background);border-radius:var(--border-radius-large)}.predefined-status__input:focus-visible+.predefined-status__label{outline:2px solid var(--color-primary-element) !important;border-radius:var(--border-radius-large)}',"\n.predefined-status {\n\t&__label {\n\t\tdisplay: flex;\n\t\tflex-wrap: nowrap;\n\t\tjustify-content: flex-start;\n\t\tflex-basis: 100%;\n\t\tborder-radius: var(--border-radius);\n\t\talign-items: center;\n\t\tmin-height: 44px;\n\n\t\t&--icon {\n\t\t\tflex-basis: 40px;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t&--message {\n\t\t\tfont-weight: bold;\n\t\t\tpadding: 0 6px;\n\t\t}\n\n\t\t&--clear-at {\n\t\t\tcolor: var(--color-text-maxcontrast);\n\n\t\t\t&::before {\n\t\t\t\tcontent: ' â€“ ';\n\t\t\t}\n\t\t}\n\t}\n\n\t&__input:checked + &__label,\n\t&__label:active {\n\t\toutline: 2px solid var(--color-main-text);\n\t\tbox-shadow: 0 0 0 4px var(--color-main-background);\n\t\tborder-radius: var(--border-radius-large);\n\t}\n\n\t&__input:focus-visible + &__label {\n\t\toutline: 2px solid var(--color-primary-element) !important;\n\t\tborder-radius: var(--border-radius-large);\n\t}\n}\n"],sourceRoot:""}]);const l=i},48067:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,".predefined-statuses-list[data-v-d615b492]{display:flex;flex-direction:column;margin-bottom:10px}","",{version:3,sources:["webpack://./apps/user_status/src/components/PredefinedStatusesList.vue"],names:[],mappings:"AACA,2CACC,YAAA,CACA,qBAAA,CACA,kBAAA",sourcesContent:["\n.predefined-statuses-list {\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: 10px;\n}\n"],sourceRoot:""}]);const l=i},5916:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,'.predefined-status[data-v-bb58290e]{display:flex;flex-wrap:nowrap;justify-content:flex-start;flex-basis:100%;border-radius:var(--border-radius);align-items:center;min-height:44px}.predefined-status[data-v-bb58290e]:hover,.predefined-status[data-v-bb58290e]:focus{background-color:var(--color-background-hover)}.predefined-status[data-v-bb58290e]:active{background-color:var(--color-background-dark)}.predefined-status__icon[data-v-bb58290e]{flex-basis:40px;text-align:center}.predefined-status__message[data-v-bb58290e]{font-weight:bold;padding:0 6px}.predefined-status__clear-at[data-v-bb58290e]{color:var(--color-text-maxcontrast)}.predefined-status__clear-at[data-v-bb58290e]::before{content:" â€“ "}.backup-status__reset-button[data-v-bb58290e]{justify-content:flex-end;display:flex;flex-grow:1}',"",{version:3,sources:["webpack://./PreviousStatus.vue","webpack://./apps/user_status/src/components/PreviousStatus.vue"],names:[],mappings:"AAAA,oCCCA,YACC,CAAA,gBACA,CAAA,0BACA,CAAA,eACA,CAAA,kCACA,CAAA,kBACA,CAAA,eACA,CAAA,oFAEA,8CAEC,CAAA,2CAGD,6CACC,CAAA,0CAGD,eACC,CAAA,iBACA,CAAA,6CAGD,gBACC,CAAA,aACA,CAAA,8CAGD,mCACC,CAAA,sDAEA,aACC,CAAA,8CAKF,wBACC,CAAA,YACA,CAAA,WACA",sourcesContent:['.predefined-status{display:flex;flex-wrap:nowrap;justify-content:flex-start;flex-basis:100%;border-radius:var(--border-radius);align-items:center;min-height:44px}.predefined-status:hover,.predefined-status:focus{background-color:var(--color-background-hover)}.predefined-status:active{background-color:var(--color-background-dark)}.predefined-status__icon{flex-basis:40px;text-align:center}.predefined-status__message{font-weight:bold;padding:0 6px}.predefined-status__clear-at{color:var(--color-text-maxcontrast)}.predefined-status__clear-at::before{content:" â€“ "}.backup-status__reset-button{justify-content:flex-end;display:flex;flex-grow:1}',"\n.predefined-status {\n\tdisplay: flex;\n\tflex-wrap: nowrap;\n\tjustify-content: flex-start;\n\tflex-basis: 100%;\n\tborder-radius: var(--border-radius);\n\talign-items: center;\n\tmin-height: 44px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-hover);\n\t}\n\n\t&:active{\n\t\tbackground-color: var(--color-background-dark);\n\t}\n\n\t&__icon {\n\t\tflex-basis: 40px;\n\t\ttext-align: center;\n\t}\n\n\t&__message {\n\t\tfont-weight: bold;\n\t\tpadding: 0 6px;\n\t}\n\n\t&__clear-at {\n\t\tcolor: var(--color-text-maxcontrast);\n\n\t\t&::before {\n\t\t\tcontent: ' â€“ ';\n\t\t}\n\t}\n}\n.backup-status {\n\t&__reset-button {\n\t\tjustify-content: flex-end;\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t}\n}\n"],sourceRoot:""}]);const l=i},55604:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(71354),n=s.n(a),r=s(76314),i=s.n(r)()(n());i.push([t.id,".set-status-modal[data-v-c7245fce]{padding:8px 20px 20px 20px}.set-status-modal__header[data-v-c7245fce]{text-align:center;font-weight:bold;margin:15px 0}.set-status-modal__online-status[data-v-c7245fce]{display:grid;grid-template-columns:1fr 1fr}.set-status-modal__custom-input[data-v-c7245fce]{display:flex;width:100%;margin-bottom:10px}.set-status-modal__automation-hint[data-v-c7245fce]{display:flex;width:100%;margin-bottom:10px;color:var(--color-text-maxcontrast)}.set-status-modal .status-buttons[data-v-c7245fce]{display:flex;padding:3px;padding-left:0;gap:3px}@media only screen and (max-width: 500px){.set-status-modal__online-status[data-v-c7245fce]{grid-template-columns:none !important}}","",{version:3,sources:["webpack://./apps/user_status/src/components/SetStatusModal.vue"],names:[],mappings:"AAEA,mCACC,0BAAA,CAEA,2CACC,iBAAA,CACA,gBAAA,CACA,aAAA,CAGD,kDACC,YAAA,CACA,6BAAA,CAGD,iDACC,YAAA,CACA,UAAA,CACA,kBAAA,CAGD,oDACC,YAAA,CACA,UAAA,CACA,kBAAA,CACA,mCAAA,CAGD,mDACC,YAAA,CACA,WAAA,CACA,cAAA,CACA,OAAA,CAIF,0CACC,kDACC,qCAAA,CAAA",sourcesContent:["\n\n.set-status-modal {\n\tpadding: 8px 20px 20px 20px;\n\n\t&__header {\n\t\ttext-align: center;\n\t\tfont-weight: bold;\n\t\tmargin: 15px 0;\n\t}\n\n\t&__online-status {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr;\n\t}\n\n\t&__custom-input {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t}\n\n\t&__automation-hint {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tmargin-bottom: 10px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t.status-buttons {\n\t\tdisplay: flex;\n\t\tpadding: 3px;\n\t\tpadding-left:0;\n\t\tgap: 3px;\n\t}\n}\n\n@media only screen and (max-width: 500px) {\n\t.set-status-modal__online-status {\n\t\tgrid-template-columns: none !important;\n\t}\n}\n\n"],sourceRoot:""}]);const l=i},13045:(t,e,s)=>{s.r(e),s.d(e,{default:()=>tt});var a=s(85168),n=s(32790),r=s(46043),i=s(53334),l=s(33114),o=s(19231),u=s(61913);const c=t=>{if(null===t)return(0,i.Tl)("user_status","Don't clear");if("end-of"===t.type)switch(t.time){case"day":return(0,i.Tl)("user_status","Today");case"week":return(0,i.Tl)("user_status","This week");default:return null}if("period"===t.type)return o.A.duration(1e3*t.time).humanize();if("_time"===t.type){const e=(0,o.A)((0,u.R)()),s=(0,o.A)(t.time,"X");return o.A.duration(e.diff(s)).humanize()}return null},d={name:"PredefinedStatus",filters:{clearAtFilter:c},props:{messageId:{type:String,required:!0},icon:{type:String,required:!0},message:{type:String,required:!0},clearAt:{type:Object,required:!1,default:null},selected:{type:Boolean,required:!1,default:!1}},computed:{id(){return"user-status-predefined-status-".concat(this.messageId)}},methods:{select(){this.$emit("select")}}};var A=s(85072),p=s.n(A),m=s(97825),g=s.n(m),C=s(77659),f=s.n(C),_=s(55056),b=s.n(_),v=s(10540),h=s.n(v),x=s(41113),y=s.n(x),S=s(69236),k={};k.styleTagTransform=y(),k.setAttributes=b(),k.insert=f().bind(null,"head"),k.domAPI=g(),k.insertStyleElement=h(),p()(S.A,k),S.A&&S.A.locals&&S.A.locals;var w=s(14486);const B=(0,w.A)(d,(function(){var t=this,e=t._self._c;return e("li",{staticClass:"predefined-status"},[e("input",{staticClass:"hidden-visually predefined-status__input",attrs:{id:t.id,type:"radio",name:"predefined-status"},domProps:{checked:t.selected},on:{change:t.select}}),t._v(" "),e("label",{staticClass:"predefined-status__label",attrs:{for:t.id}},[e("span",{staticClass:"predefined-status__label--icon",attrs:{"aria-hidden":"true"}},[t._v("\n\t\t\t"+t._s(t.icon)+"\n\t\t")]),t._v(" "),e("span",{staticClass:"predefined-status__label--message"},[t._v("\n\t\t\t"+t._s(t.message)+"\n\t\t")]),t._v(" "),e("span",{staticClass:"predefined-status__label--clear-at"},[t._v("\n\t\t\t"+t._s(t._f("clearAtFilter")(t.clearAt))+"\n\t\t")])])])}),[],!1,null,"0c9447c8",null).exports;var $=s(95353);const I={name:"PredefinedStatusesList",components:{PredefinedStatus:B},data:()=>({lastSelected:null}),computed:{...(0,$.aH)({predefinedStatuses:t=>t.predefinedStatuses.predefinedStatuses,messageId:t=>t.userStatus.messageId}),...(0,$.L8)(["statusesHaveLoaded"])},watch:{messageId:{immediate:!0,handler(){this.lastSelected=this.messageId}}},created(){this.$store.dispatch("loadAllPredefinedStatuses")},methods:{selectStatus(t){this.lastSelected=t.id,this.$emit("select-status",t)}}};var T=s(48067),E={};E.styleTagTransform=y(),E.setAttributes=b(),E.insert=f().bind(null,"head"),E.domAPI=g(),E.insertStyleElement=h(),p()(T.A,E),T.A&&T.A.locals&&T.A.locals;const M=(0,w.A)(I,(function(){var t=this,e=t._self._c;return t.statusesHaveLoaded?e("ul",{staticClass:"predefined-statuses-list",attrs:{"aria-label":t.t("user_status","Predefined statuses")}},t._l(t.predefinedStatuses,(function(s){return e("PredefinedStatus",{key:s.id,attrs:{"message-id":s.id,icon:s.icon,message:s.message,"clear-at":s.clearAt,selected:t.lastSelected===s.id},on:{select:function(e){return t.selectStatus(s)}}})})),1):e("div",{staticClass:"predefined-statuses-list"},[e("div",{staticClass:"icon icon-loading-small"})])}),[],!1,null,"d615b492",null).exports,P={name:"PreviousStatus",components:{NcButton:r.A},props:{icon:{type:[String,null],required:!0},message:{type:String,required:!0}},methods:{select(){this.$emit("select")}}};var D=s(5916),L={};L.styleTagTransform=y(),L.setAttributes=b(),L.insert=f().bind(null,"head"),L.domAPI=g(),L.insertStyleElement=h(),p()(D.A,L),D.A&&D.A.locals&&D.A.locals;const N=(0,w.A)(P,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"predefined-status backup-status",attrs:{tabindex:"0"},on:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.select.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])?null:t.select.apply(null,arguments)}],click:t.select}},[e("span",{staticClass:"predefined-status__icon"},[t._v("\n\t\t"+t._s(t.icon)+"\n\t")]),t._v(" "),e("span",{staticClass:"predefined-status__message"},[t._v("\n\t\t"+t._s(t.message)+"\n\t")]),t._v(" "),e("span",{staticClass:"predefined-status__clear-at"},[t._v("\n\t\t"+t._s(t.$t("user_status","Previously set"))+"\n\t")]),t._v(" "),e("div",{staticClass:"backup-status__reset-button"},[e("NcButton",{on:{click:t.select}},[t._v("\n\t\t\t"+t._s(t.$t("user_status","Reset status"))+"\n\t\t")])],1)])}),[],!1,null,"bb58290e",null).exports;var F=s(19398);const z={name:"CustomMessageInput",components:{NcTextField:s(26893).N,NcButton:r.A,NcEmojiPicker:F.N},props:{icon:{type:String,default:"ðŸ˜€"},message:{type:String,required:!0,default:()=>""},disabled:{type:Boolean,default:!1}},emits:["change","select-icon"],computed:{visibleIcon(){return this.icon||"ðŸ˜€"}},methods:{focus(){this.$refs.input.focus()},onChange(t){this.$emit("change",t.target.value)},setIcon(t){this.$emit("select-icon",t)}}};var G=s(29478),j={};j.styleTagTransform=y(),j.setAttributes=b(),j.insert=f().bind(null,"head"),j.domAPI=g(),j.insertStyleElement=h(),p()(G.A,j),G.A&&G.A.locals&&G.A.locals;const R=(0,w.A)(z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-input",attrs:{role:"group"}},[e("NcEmojiPicker",{attrs:{container:".custom-input"},on:{select:t.setIcon}},[e("NcButton",{attrs:{type:"tertiary","aria-label":t.t("user_status","Emoji for your status message")},scopedSlots:t._u([{key:"icon",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.visibleIcon)+"\n\t\t\t")]},proxy:!0}])})],1),t._v(" "),e("div",{staticClass:"custom-input__container"},[e("NcTextField",{ref:"input",attrs:{maxlength:"80",disabled:t.disabled,placeholder:t.t("user_status","What is your status?"),value:t.message,type:"text",label:t.t("user_status","What is your status?")},on:{input:t.onChange}})],1)],1)}),[],!1,null,"3f943eb8",null).exports;const H={name:"ClearAtSelect",components:{NcSelect:s(23924).N},props:{clearAt:{type:Object,default:null}},data:()=>({options:[{label:(0,i.Tl)("user_status","Don't clear"),clearAt:null},{label:(0,i.Tl)("user_status","30 minutes"),clearAt:{type:"period",time:1800}},{label:(0,i.Tl)("user_status","1 hour"),clearAt:{type:"period",time:3600}},{label:(0,i.Tl)("user_status","4 hours"),clearAt:{type:"period",time:14400}},{label:(0,i.Tl)("user_status","Today"),clearAt:{type:"end-of",time:"day"}},{label:(0,i.Tl)("user_status","This week"),clearAt:{type:"end-of",time:"week"}}]}),computed:{option(){return{clearAt:this.clearAt,label:c(this.clearAt)}}},methods:{select(t){t&&this.$emit("select-clear-at",t.clearAt)}}};var O=s(29957),q={};q.styleTagTransform=y(),q.setAttributes=b(),q.insert=f().bind(null,"head"),q.domAPI=g(),q.insertStyleElement=h(),p()(O.A,q),O.A&&O.A.locals&&O.A.locals;const U=(0,w.A)(H,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"clear-at-select"},[e("label",{staticClass:"clear-at-select__label",attrs:{for:"clearStatus"}},[t._v("\n\t\t"+t._s(t.$t("user_status","Clear status after"))+"\n\t")]),t._v(" "),e("NcSelect",{staticClass:"clear-at-select__select",attrs:{"input-id":"clearStatus",options:t.options,value:t.option,clearable:!1,placement:"top"},on:{"option:selected":t.select}})],1)}),[],!1,null,"72be27d6",null).exports,Y={name:"OnlineStatusSelect",components:{NcUserStatusIcon:s(19735).A},props:{checked:{type:Boolean,default:!1},type:{type:String,required:!0},label:{type:String,required:!0},subline:{type:String,default:null}},computed:{id(){return"user-status-online-status-".concat(this.type)}},methods:{onChange(){this.$emit("select",this.type)}}};var X=s(74430),V={};V.styleTagTransform=y(),V.setAttributes=b(),V.insert=f().bind(null,"head"),V.domAPI=g(),V.insertStyleElement=h(),p()(X.A,V),X.A&&X.A.locals&&X.A.locals;const W=(0,w.A)(Y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-status-online-select"},[e("input",{staticClass:"hidden-visually user-status-online-select__input",attrs:{id:t.id,type:"radio",name:"user-status-online"},domProps:{checked:t.checked},on:{change:t.onChange}}),t._v(" "),e("label",{staticClass:"user-status-online-select__label",attrs:{for:t.id}},[t._v("\n\t\t"+t._s(t.label)+"\n\t\t"),e("NcUserStatusIcon",{attrs:{status:t.type,"aria-hidden":"true"}}),t._v(" "),e("em",{staticClass:"user-status-online-select__subline"},[t._v(t._s(t.subline))])],1)])}),[],!1,null,"a73330f8",null).exports;var Z=s(96763);const K={name:"SetStatusModal",components:{ClearAtSelect:U,CustomMessageInput:R,NcModal:n.A,OnlineStatusSelect:W,PredefinedStatusesList:M,PreviousStatus:N,NcButton:r.A},mixins:[l.A],props:{inline:{type:Boolean,default:!1}},data:()=>({clearAt:null,editedMessage:"",isSavingStatus:!1,statuses:[{type:"online",label:(0,i.Tl)("user_status","Online")},{type:"away",label:(0,i.Tl)("user_status","Away")},{type:"dnd",label:(0,i.Tl)("user_status","Do not disturb"),subline:(0,i.Tl)("user_status","Mute all notifications")},{type:"invisible",label:(0,i.Tl)("user_status","Invisible"),subline:(0,i.Tl)("user_status","Appear offline")}]}),computed:{messageId(){return this.$store.state.userStatus.messageId},icon(){return this.$store.state.userStatus.icon},message(){return this.$store.state.userStatus.message||""},hasBackupStatus(){return this.messageId&&(this.backupIcon||this.backupMessage)},backupIcon(){return this.$store.state.userBackupStatus.icon||""},backupMessage(){return this.$store.state.userBackupStatus.message||""},resetButtonText(){return this.backupIcon&&this.backupMessage?this.$t("user_status",'Reset status to "{icon} {message}"',{icon:this.backupIcon,message:this.backupMessage}):this.backupMessage?this.$t("user_status",'Reset status to "{message}"',{message:this.backupMessage}):this.backupIcon?this.$t("user_status",'Reset status to "{icon}"',{icon:this.backupIcon}):this.$t("user_status","Reset status")},setReturnFocus(){var t;if(!this.inline)return null!==(t=document.querySelector('[aria-controls="header-menu-user-menu"]'))&&void 0!==t?t:void 0}},watch:{message:{immediate:!0,handler(t){this.editedMessage=t}}},mounted(){this.$store.dispatch("fetchBackupFromServer"),null!==this.$store.state.userStatus.clearAt&&(this.clearAt={type:"_time",time:this.$store.state.userStatus.clearAt})},methods:{closeModal(){this.$emit("close")},setIcon(t){this.$store.dispatch("setCustomMessage",{message:this.message,icon:t,clearAt:this.clearAt}),this.$nextTick((()=>{this.$refs.customMessageInput.focus()}))},setMessage(t){this.editedMessage=t},setClearAt(t){this.clearAt=t},selectPredefinedMessage(t){this.clearAt=t.clearAt,this.$store.dispatch("setPredefinedMessage",{messageId:t.id,clearAt:t.clearAt})},async saveStatus(){if(!this.isSavingStatus){try{this.isSavingStatus=!0,await this.$store.dispatch("setCustomMessage",{message:this.editedMessage,icon:this.icon,clearAt:this.clearAt})}catch(t){return(0,a.Qg)(this.$t("user_status","There was an error saving the status")),Z.debug(t),void(this.isSavingStatus=!1)}this.isSavingStatus=!1,this.closeModal()}},async clearStatus(){try{this.isSavingStatus=!0,await this.$store.dispatch("clearMessage")}catch(t){return(0,a.Qg)(this.$t("user_status","There was an error clearing the status")),Z.debug(t),void(this.isSavingStatus=!1)}this.isSavingStatus=!1,this.closeModal()},async revertBackupFromServer(){try{this.isSavingStatus=!0,await this.$store.dispatch("revertBackupFromServer",{messageId:this.messageId})}catch(t){return(0,a.Qg)(this.$t("user_status","There was an error reverting the status")),Z.debug(t),void(this.isSavingStatus=!1)}this.isSavingStatus=!1}}};var Q=s(55604),J={};J.styleTagTransform=y(),J.setAttributes=b(),J.insert=f().bind(null,"head"),J.domAPI=g(),J.insertStyleElement=h(),p()(Q.A,J),Q.A&&Q.A.locals&&Q.A.locals;const tt=(0,w.A)(K,(function(){var t=this,e=t._self._c;return e("NcModal",{attrs:{size:"normal",name:t.$t("user_status","Set status"),"set-return-focus":t.setReturnFocus},on:{close:t.closeModal}},[e("div",{staticClass:"set-status-modal"},[e("div",{staticClass:"set-status-modal__header"},[e("h2",[t._v(t._s(t.$t("user_status","Online status")))])]),t._v(" "),e("div",{staticClass:"set-status-modal__online-status",attrs:{role:"radiogroup","aria-label":t.$t("user_status","Online status")}},t._l(t.statuses,(function(s){return e("OnlineStatusSelect",t._b({key:s.type,attrs:{checked:s.type===t.statusType},on:{select:t.changeStatus}},"OnlineStatusSelect",s,!1))})),1),t._v(" "),e("form",{on:{submit:function(e){return e.preventDefault(),t.saveStatus.apply(null,arguments)},reset:t.clearStatus}},[e("div",{staticClass:"set-status-modal__header"},[e("h2",[t._v(t._s(t.$t("user_status","Status message")))])]),t._v(" "),e("div",{staticClass:"set-status-modal__custom-input"},[e("CustomMessageInput",{ref:"customMessageInput",attrs:{icon:t.icon,message:t.editedMessage},on:{change:t.setMessage,"select-icon":t.setIcon}})],1),t._v(" "),t.hasBackupStatus?e("div",{staticClass:"set-status-modal__automation-hint"},[t._v("\n\t\t\t\t"+t._s(t.$t("user_status","Your status was set automatically"))+"\n\t\t\t")]):t._e(),t._v(" "),t.hasBackupStatus?e("PreviousStatus",{attrs:{icon:t.backupIcon,message:t.backupMessage},on:{select:t.revertBackupFromServer}}):t._e(),t._v(" "),e("PredefinedStatusesList",{on:{"select-status":t.selectPredefinedMessage}}),t._v(" "),e("ClearAtSelect",{attrs:{"clear-at":t.clearAt},on:{"select-clear-at":t.setClearAt}}),t._v(" "),e("div",{staticClass:"status-buttons"},[e("NcButton",{attrs:{wide:!0,type:"tertiary","native-type":"reset","aria-label":t.$t("user_status","Clear status message"),disabled:t.isSavingStatus}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("user_status","Clear status message"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{wide:!0,type:"primary","native-type":"submit","aria-label":t.$t("user_status","Set status message"),disabled:t.isSavingStatus}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("user_status","Set status message"))+"\n\t\t\t\t")])],1)],1)])])}),[],!1,null,"c7245fce",null).exports},51818:(t,e,s)=>{s.d(e,{A:()=>h});var a=s(85072),n=s.n(a),r=s(97825),i=s.n(r),l=s(77659),o=s.n(l),u=s(55056),c=s.n(u),d=s(10540),A=s.n(d),p=s(41113),m=s.n(p),g=s(99831),C={};C.styleTagTransform=m(),C.setAttributes=c(),C.insert=o().bind(null,"head"),C.domAPI=i(),C.insertStyleElement=A(),n()(g.A,C),g.A&&g.A.locals&&g.A.locals;var f=s(15240);const _={name:"NcLoadingIcon",props:{size:{type:Number,default:20},appearance:{type:String,validator:t=>["auto","light","dark"].includes(t),default:"auto"},name:{type:String,default:""}},computed:{colors(){const t=["#777","#CCC"];return"light"===this.appearance?t:"dark"===this.appearance?t.reverse():["var(--color-loading-light)","var(--color-loading-dark)"]}}};var b=function(){var t=this,e=t._self._c;return e("span",{staticClass:"material-design-icon loading-icon",attrs:{"aria-label":t.name,role:"img"}},[e("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{fill:t.colors[0],d:"M12,4V2A10,10 0 1,0 22,12H20A8,8 0 1,1 12,4Z"}}),e("path",{attrs:{fill:t.colors[1],d:"M12,4V2A10,10 0 0,1 22,12H20A8,8 0 0,0 12,4Z"}},[t.name?e("title",[t._v(t._s(t.name))]):t._e()])])])},v=[];const h=(0,f.n)(_,b,v,!1,null,"551209a3",null,null).exports},6129:(t,e,s)=>{s.d(e,{F:()=>o,YH:()=>u,al:()=>l});var a=s(85471);const n=t=>document.documentElement.clientWidth<t,r=(0,a.KR)(n(1024)),i=(0,a.KR)(n(512));function l(){return(0,a.tB)(r)}function o(){return(0,a.tB)(i)}window.addEventListener("resize",(()=>{r.value=n(1024),i.value=n(512)}),{passive:!0});const u=(0,a.tB)(r)},76182:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(15240);const n={name:"ArrowLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var r=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon arrow-left-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},i=[];const l=(0,a.n)(n,r,i,!1,null,null,null,null).exports},36999:(t,e,s)=>{s.d(e,{A:()=>l});var a=s(15240);const n={name:"ArrowRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var r=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon arrow-right-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},i=[];const l=(0,a.n)(n,r,i,!1,null,null,null,null).exports},63559:(t,e,s)=>{s.d(e,{C:()=>l});var a=s(15240);const n={name:"CheckIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var r=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon check-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},i=[];const l=(0,a.n)(n,r,i,!1,null,null,null,null).exports},26893:(t,e,s)=>{s.d(e,{N:()=>C});var a=s(76299),n=s(29507),r=s(36999),i=s(15240),l=s(15008);const o={name:"UndoVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var u=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon undo-variant-icon",attrs:{"aria-hidden":!t.title||null,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M13.5,7A6.5,6.5 0 0,1 20,13.5A6.5,6.5 0 0,1 13.5,20H10V18H13.5C16,18 18,16 18,13.5C18,11 16,9 13.5,9H7.83L10.91,12.09L9.5,13.5L4,8L9.5,2.5L10.92,3.91L7.83,7H13.5M6,18H8V20H6V18Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},c=[];const d=(0,i.n)(o,u,c,!1,null,null,null,null).exports;(0,l.r)(l.d,l.c);const A=new Set(Object.keys(a.A.props)),p={name:"NcTextField",components:{NcInputField:a.A,Close:n.C,ArrowRight:r.A,Undo:d},inheritAttrs:!1,props:{" ":{},...a.A.props,trailingButtonLabel:{type:String,default:""},trailingButtonIcon:{type:String,default:"close",validator:t=>["close","arrowRight","undo"].includes(t)}},emits:["update:value"],computed:{propsAndAttrsToForward(){const t={undo:(0,l.a)("Undo changes"),close:(0,l.a)("Clear text"),arrowRight:(0,l.a)("Save changes")};return{...this.$attrs,...Object.fromEntries(Object.entries(this.$props).filter((([t])=>A.has(t)))),trailingButtonLabel:this.trailingButtonLabel||t[this.trailingButtonIcon]}}},methods:{focus(){this.$refs.inputField.focus()},select(){this.$refs.inputField.select()},handleInput(t){this.$emit("update:value",t.target.value)}}};var m=function(){var t=this,e=t._self._c;return e("NcInputField",t._g(t._b({ref:"inputField",on:{input:t.handleInput},scopedSlots:t._u(["search"!==t.type?{key:"trailing-button-icon",fn:function(){return["close"===t.trailingButtonIcon?e("Close",{attrs:{size:20}}):"arrowRight"===t.trailingButtonIcon?e("ArrowRight",{attrs:{size:20}}):"undo"===t.trailingButtonIcon?e("Undo",{attrs:{size:20}}):t._e()]},proxy:!0}:null],null,!0)},"NcInputField",t.propsAndAttrsToForward,!1),t.$listeners),[t._t("default")],2)},g=[];const C=(0,i.n)(p,m,g,!1,null,null,null,null).exports},31102:(t,e,s)=>{s.d(e,{a:()=>u,e:()=>o,g:()=>c,s:()=>d});var a=s(87206),n=s(71977),r=s(55694);const i=(0,a.c0)("nextcloud-vue").persist(!0).build();let l;function o(t,e=10){l||(l=new n.EmojiIndex(r));const s=c();let a;return t?(a=l.search(":".concat(t),e),a.length<e&&(a=a.concat(l.search(t,e-a.length)))):a=n.frequently.get(e).map((t=>l.emoji(t)))||[],a.map((t=>t.getSkin(s)))}function u(t){n.frequently.add(t)}function c(){var t;const e=Number.parseInt(null!=(t=i.getItem("NcEmojiPicker::currentSkinTone"))?t:"1");return Math.min(Math.max(e,1),6)}function d(t){t=Math.min(Math.max(t,1),6),i.setItem("NcEmojiPicker::currentSkinTone",t.toString())}}}]);
//# sourceMappingURL=user-status-modal-5133.js.map?v=cbe1682c88904040fc9b